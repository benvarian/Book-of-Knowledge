@prefix code: <https://uwa.handbook/code/> .
@prefix rel: <https://uwa.handbook/relation/> .
@prefix schema1: <http://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

[] a sh:ValidationReport ;
    sh:conforms false ;
    sh:result [ a sh:ValidationResult ;
            sh:focusNode code:ARTF3050 ;
            sh:resultMessage "Unit cannot be a prerequisite of itself." ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraint [ a sh:SPARQLConstraint ;
                    sh:message "Unit cannot be a prerequisite of itself." ;
                    sh:prefixes rel: ;
                    sh:select """\r
            SELECT $this\r
            WHERE {\r
                $this rel:Prerequisite $this .\r
            }\r
        """ ] ;
            sh:sourceConstraintComponent sh:SPARQLConstraintComponent ;
            sh:sourceShape schema1:SelfPrereqShape ;
            sh:value code:ARTF3050 ],
        [ a sh:ValidationResult ;
            sh:focusNode code:GEND2902 ;
            sh:resultMessage """Node code:GEND2902 does not conform to one or more shapes in [ sh:property [ sh:hasValue Literal("1", datatype=xsd:integer) ; sh:path rel:Level ] ] , [ sh:sparql [ rdf:type sh:SPARQLConstraint ; sh:message Literal("Prerequisite must have a lower unit level than unit") ; sh:prefixes <https://uwa.handbook/relation/> ; sh:select Literal("\r
                    SELECT $this\r
                    WHERE {\r
                        $this rel:Level ?level .\r
                        $this rel:Prerequisite ?prereq .\r
                        ?prereq rel:Level ?prereqLevel\r
                        FILTER (?prereqLevel > ?level)\r
                    }\r
                ") ] ] , [ sh:property [ sh:maxCount Literal("0", datatype=xsd:integer) ; sh:path rel:Prerequisite ] ]""" ;
            sh:resultSeverity sh:Violation ;
            sh:sourceConstraintComponent sh:OrConstraintComponent ;
            sh:sourceShape schema1:PrereqShape ;
            sh:value code:GEND2902 ] .

